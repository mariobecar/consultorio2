//Database name : Consultorio1
//User Name : consultorio
//Password : java123
//crear tablas en orden(MEDICO-PACIENTE-EXAMEN-CONSULTA_MEDICA-DETALLE_CONSULTA


CREATE TABLE PACIENTE(

RUT         VARCHAR(15) NOT NULL,
NOMBRE      VARCHAR(25) NOT NULL,
APELLIDO    VARCHAR(25) NOT NULL,
FECHA_DE_NACIMIENTO DATE,

PRIMARY KEY (RUT)     
);



CREATE TABLE MEDICO(

RUT          VARCHAR(15) NOT NULL,
NOMBRE       VARCHAR(25) NOT NULL,
APELLIDO     VARCHAR(25) NOT NULL,
ESPECIALIDAD VARCHAR(50) NOT NULL,

PRIMARY KEY (RUT)
);



CREATE TABLE CONSULTA_MEDICA(   

CODIGO_CONSULTA INTEGER not null GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
RUT_PACIENTE    VARCHAR (15) NOT NULL,
RUT_MEDICO      VARCHAR (15) NOT NULL, 
FECHA_CONSULTA  DATE NOT NULL,
DIAGNOSTICO     VARCHAR(200) NOT NULL,
TRATAMIENTO     VARCHAR (200) NOT NULL,
TIPO_CONSULTA   CHAR(1) NOT NULL,

PRIMARY KEY(CODIGO_CONSULTA),
CONSTRAINT RUT_PACIENTE FOREIGN KEY (RUT_PACIENTE) REFERENCES PACIENTE(RUT)
CONSTRAINT RUT_MEDICO   FOREIGN KEY (RUT_MEDICO)   REFERENCES MEDICO(RUT)
);



CREATE TABLE DETALLE_CONSULTA(

CODIGO_CONSULTA   INTEGER NOT NULL,
CODIGO_EXAMEN     INTEGER NOT NULL,
SOLICITADO        CHAR(1) NOT NULL,

CONSTRAINT CODIGO_CONSULTA FOREIGN KEY (CODIGO_CONSULTA) REFERENCES CONSULTA_MEDICA(CODIGO_CONSULTA)
CONSTRAINT CODIGO_EXAMEN FOREIGN KEY (CODIGO_EXAMEN) REFERENCES EXAMEN(CODIGO)
);



CREATE TABLE EXAMEN(
CODIGO      INTEGER not null GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
NOMBRE      VARCHAR(25) NOT NULL,
TIPO_EXAMEN CHAR(1) NOT NULL,

PRIMARY KEY(CODIGO)
);
